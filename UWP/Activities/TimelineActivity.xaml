<paging:Activity
    x:Class="WeiPo.Activities.TimelineActivity"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:paging="using:Bug10.Paging"
    xmlns:viewModels="using:WeiPo.ViewModels"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:common="using:WeiPo.Common"
    xmlns:linq="using:Newtonsoft.Json.Linq"
    xmlns:controls1="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:controls2="using:WeiPo.Controls"
    xmlns:animations="using:Microsoft.Toolkit.Uwp.UI.Animations"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:behaviors="using:Microsoft.Toolkit.Uwp.UI.Animations.Behaviors"
    xmlns:shiba="using:Shiba"
    mc:Ignorable="d">
    <paging:Activity.DataContext>
        <viewModels:TimelineViewModel/>
    </paging:Activity.DataContext>
    <Grid>
        <ScrollViewer ViewChanged="ScrollViewer_OnViewChanged">
            <controls:ItemsRepeater Name="TimelineItemsRepeater" ItemsSource="{x:Bind DataContext.(viewModels:TimelineViewModel.Timeline)}" >
                <controls:ItemsRepeater.Layout>
                    <common:StaggeredLayout DesiredColumnWidth="400"/>
                </controls:ItemsRepeater.Layout>
                <controls:ItemsRepeater.ItemTemplate>
                    <DataTemplate x:DataType="linq:JObject">
                        <shiba:ShibaHost HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Component="weiboStatus" DataContext="{Binding}"/>
                    </DataTemplate>
                </controls:ItemsRepeater.ItemTemplate>
            </controls:ItemsRepeater>
        </ScrollViewer>

        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" MaxWidth="600" Name="Header">
            <controls1:DropShadowPanel
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch"
                        ShadowOpacity="0.6"
                        Margin="16"
                        BlurRadius="10">
                <Border Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" Opacity="0.66">
                    <interactivity:Interaction.Behaviors>
                        <behaviors:Blur AutomaticallyStart="True"
                                                Delay="0"
                                                Value="10"
                                                Duration="0" />
                    </interactivity:Interaction.Behaviors>
                </Border>
            </controls1:DropShadowPanel>
            <Grid Margin="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <controls1:ImageEx Width="40" Height="40" CornerRadius="999"/>
                <TextBox VerticalContentAlignment="Center" BorderThickness="0" Grid.Column="1" HorizontalAlignment="Stretch" IsReadOnly="True" Text="Say sth..."/>
            </Grid>
        </Grid>
    </Grid>
</paging:Activity>
